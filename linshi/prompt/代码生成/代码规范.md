1. 请保持对话语言为中文
2. 我的系统为 Mac
3. 请务必遵守以下代码规范

---

## 代码规范

### 通用规范

1. **单一职责原则 (SRP)**

- 每个模块/函数只负责一项功能

2. **高内聚低耦合**

- 模块之间尽可能解耦，职责清晰

### TypeScript 规范

#### 类型系统

1. 所有变量、函数参数和返回值都必须显式标注类型
2. 优先使用 `interface` 定义数据结构，必要时使用 `type`
3. 尽量避免使用 any，使用时必须添加注释说明理由，或者使用 `unknown` 或更合适的类型替代
4. 使用类型保护来避免类型错误

#### 语法风格

1. 使用解构赋值
2. 使用扩展运算符 (`...`)
3. 使用模板字符串 (`` ` ``)
4. 单引号 (`''`) 优先
5. 语句末尾不加分号
6. 使用 `const` + 箭头函数声明函数
7. 使用默认参数值，减少条件判断

#### 异步处理

1. 使用 `async/await`，而不是回调函数

#### 命名规范

1. 变量名、函数名应具有描述性，反映其用途
2. 统一使用小驼峰命名法
3. 优先使用 `const` 声明变量，而不是 `let`
4. 保持变量作用域最小化
5. 使用常量存储不变的值，避免魔法数字

#### 控制流程

1. 即使 `if` 只有 1 行，也要写大括号
2. 即使函数只有 1 行，也要写大括号
3. 使用早返回 (early return) 减少嵌套
4. 避免多层嵌套 `if/else`，使用 `switch` 或函数拆分
5. 避免在循环体中进行不必要的重复操作

### 格式规范

#### 空行规则

1. 模块之间空 1 行
2. 函数之间空 1 行
3. 逻辑段落分隔处可适当空 1 行
4. 用空行分隔逻辑块，不允许有多行不同的逻辑语句之间没有空格（如参数校验、主逻辑、返回值）

#### 可读性

1. 每行代码不超过 100 字符
2. 每个函数控制在 20 行以内，超过30 行则考虑拆分
3. 在代码的最后一行必须是空行，保证“末尾空行”、“文件结尾空行”

### 注释规范

1. **注释原则**

- 解释"为什么"而非"做什么"
- 使用中文注释
- 使用单行注释 (`//`)
- 逻辑不明确处，强制写注释，逻辑简单处，禁止写注释

2. **注释位置**
   ```typescript
   // 较长的注释写在代码上方
   const result = calculate();

   const total = 0;  // 简短的注释可以写在右侧
