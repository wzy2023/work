import{d as A,U as _,r as i,l as d,ae as h,R as S,A as z,H as m,z as C,C as f,bw as x,x as N,J as b}from"./index-fbbac701.js";import{N as $}from"./Time-e45edf09.js";import{b as U}from"./DataTable-1f6f0c54.js";import"./index-f5ac7aca.js";import"./Forward-3cd0631b.js";import"./Dropdown-178d9d7e.js";import"./FocusDetector-10318a71.js";const J=A({__name:"index",setup(D){const v=_(),s=i(!1),t=i({page:1,pageSize:10,itemCount:0,showSizePicker:!0,pageSizes:[10,20,50,100],onChange:e=>{t.value.page=e,n()},onUpdatePageSize:e=>{t.value.pageSize=e,t.value.page=1,n()},prefix:e=>`共 ${e.itemCount} 条`}),n=async()=>{try{s.value=!0;const{data:e}=await x({page:{current:t.value.page,pageSize:t.value.pageSize},sort:r.value});if(s.value=!1,!e)return;l.value=e.list,t.value.itemCount=e.total}catch(e){v.error(e==null?void 0:e.message)}},r=i({createAt:"descend"}),k=[{title:"埋点Id",key:"pointId",align:"center"},{title:"用户",key:"user",align:"center",render:e=>e!=null&&e.user?d(h,{userInfo:e==null?void 0:e.user,showDetail:!0}):null},{title:"昵称",key:"user.wx.nickname",align:"center"},{title:"类型",key:"pointType",align:"center"},{title:"名称",key:"pointName",align:"center"},{title:"页面",key:"pageUrl",align:"center"},{title:"用户",key:"userAgent",align:"center",width:200,render:e=>{var a,u,c,o,g,p;return`${(u=(a=e==null?void 0:e.userAgent)==null?void 0:a.os)==null?void 0:u.name} - ${(o=(c=e==null?void 0:e.userAgent)==null?void 0:c.device)==null?void 0:o.model} - ${(p=(g=e==null?void 0:e.userAgent)==null?void 0:g.browser)==null?void 0:p.name}`}},{title:"触发时间",key:"createAt",align:"center",sortOrder:r.value.createAt,sorter:(e,a)=>e.createAt-a.createAt,render:e=>d($,{time:Number(e.createAt)})}],l=i([]);S(()=>{n()});const y=e=>{if(!e.order){r.value={};return}r.value={[e.columnKey]:e.order},n()};return(e,a)=>(N(),z("div",null,[m(f(b),{title:"埋点记录",size:"small"},{default:C(()=>[m(f(U),{remote:"",loading:s.value,columns:k,data:l.value,bordered:!1,pagination:t.value,"onUpdate:sorter":y,"scroll-x":"1350"},null,8,["loading","data","pagination"])]),_:1})]))}});export{J as default};
