import{d as g,U as f,r as n,R as S,A as k,H as l,z as v,C as u,bv as y,x as C,J as _,l as t,ae as z,af as o}from"./index-fbbac701.js";import{O as c,o as h}from"./order-4f3caf57.js";import{b as x}from"./DataTable-1f6f0c54.js";import{N as p}from"./Time-e45edf09.js";import"./Forward-3cd0631b.js";import"./Dropdown-178d9d7e.js";import"./FocusDetector-10318a71.js";import"./index-f5ac7aca.js";const B=g({__name:"index",setup(N){const m=f(),r=n(!1),a=n({page:1,pageSize:10,itemCount:0,showSizePicker:!0,pageSizes:[10,20,50,100],onChange:e=>{a.value.page=e,s()},onUpdatePageSize:e=>{a.value.pageSize=e,a.value.page=1,s()},prefix:e=>`共 ${e.itemCount} 条`}),s=async()=>{try{r.value=!0;const{data:e}=await y({page:{current:a.value.page,pageSize:a.value.pageSize}});if(r.value=!1,!e)return;i.value=e.list,a.value.itemCount=e.total}catch(e){m.error(e==null?void 0:e.message)}},d=[{title:"订单号",key:"orderId",align:"center"},{title:"用户",key:"user",align:"center",render:e=>t(z,{userInfo:e==null?void 0:e.user,showDetail:!0})},{title:"昵称",key:"user.wx.nickname",align:"center"},{title:"金额",key:"sku.price",align:"center"},{title:"点数",key:"num",align:"center",render:e=>t(o,{size:"small"},e.status!==c.SUCCESS?0:`+${(e.sku.num||0)+(e.sku.bonus||0)}`)},{title:"状态",key:"status",align:"center",render:e=>t(o,{type:e.status===c.SUCCESS?"success":"default"},h[e.status])},{title:"下单时间",key:"createAt",align:"center",render:e=>t(p,{time:Number(e.createAt)})},{title:"支付时间",key:"payAt",align:"center",render:e=>e.payAt?t(p,{time:Number(e.payAt)}):"-"}],i=n([]);return S(()=>{s()}),(e,b)=>(C(),k("div",null,[l(u(_),{title:"订单记录",size:"small"},{default:v(()=>[l(u(x),{remote:"",loading:r.value,columns:d,data:i.value,bordered:!1,pagination:a.value,"scroll-x":"1350"},null,8,["loading","data","pagination"])]),_:1})]))}});export{B as default};
